---
export const prerender = false;

import Layout from "../layouts/Layout.astro";
import Greeting from "../components/Welcome.astro";
import LanguageSwitcher from "../components/LanguageSwitcher.astro";

const params = new URL(Astro.request.url).searchParams;
const lang = params.get("lang") || Astro.cookies.get("lang")?.value || "en";

Astro.cookies.set("lang", lang, { path: "/" });
---

<Layout title="Multilingual Site">
  <Greeting lang={lang} />
  <LanguageSwitcher currentLang={lang} />
</Layout>
