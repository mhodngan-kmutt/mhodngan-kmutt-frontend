---
import Layout from '../../../layouts/Layout.astro';
import HeaderBar from '../../../components/common/header/HeaderBar.astro';
import i18n from '../../../i18n/i18n';
import BlockEditorWrapper from '@/components/writeProject/BlockEditorWrapper';

export const prerender = false;

const { lang } = Astro.params as { lang: string };
const currentLang = lang === 'th' ? 'th' : 'en';
i18n.changeLanguage(currentLang);
---

<Layout title="Profile">
  <HeaderBar t={i18n.t.bind(i18n)} lang={currentLang} mode="write" />
  <BlockEditorWrapper client:load currentLang={currentLang} />
</Layout>

<script>
  // üí° ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Custom Event ‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á Client
  // ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AuthHeaderButton (‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô React Component) ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Ref/Title ‡πÑ‡∏î‡πâ
  // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç AuthHeaderButton ‡πÉ‡∏´‡πâ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Event ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á

  if (typeof window !== 'undefined') {
    window.addEventListener('editorPropsReady', ((event) => {
        const authButton = document.querySelector('.auth-header-button-container'); 
        if (authButton) {
            // üí° ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ React Hydration (client:load) ‡πÉ‡∏ô AuthHeaderButton
            // ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Component ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Props
            // ‡πÅ‡∏ï‡πà‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Astro ‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÄ‡∏ä‡πà‡∏ô‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á 
            // ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏õ‡∏£‡∏±‡∏ö AuthHeaderButton ‡πÉ‡∏´‡πâ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Event 
            // ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô State ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
        }
    }) as EventListener);
  }
</script>