---
import { getProjectsOfTheMonth } from '@/lib/api';
import BigCard from '@/components/common/previewCard/BigCard.astro';
import ButtonIcon from '@/components/common/button/ButtonIcon';
import { ArrowRightIcon } from 'lucide-react';

const { t, lang } = Astro.props;

// get date from API mock
const projects = await getProjectsOfTheMonth();
---

<section id="MonthSection" class="flex w-full flex-col gap-5 py-6 px-16 pt-10 pb-5">
  <!-- Topic -->
  <div class="flex flex-col items-center gap-2 text-center">
    <p>{t('home.month.smallTopic')}</p>
    <h1>{t('home.month.topic')}</h1>
    <div class="lead">{t('home.month.subTopic')}</div>
  </div>

  <!-- List of Cards -->
  <div class="flex flex-wrap gap-6 justify-center">
    {
      projects.map((p) => (
        <BigCard
          t={t}
          projectImage={p.image}
          title={p.title}
          explanation={p.description}
          likes={p.likes}
          views={p.views}
          professors={p.Professors}
          contributors={p.Contributor}
          teamName={p.team}
          link={`/${lang}/project/${p.slug}`}
        />
      ))
    }
  </div>

  <!-- Explore More -->
  <div class="flex justify-center items-center gap-5 mt-6">
    <p>{t('home.month.viewAll')}</p>
    <a href={`/${lang}/project`}>
      <ButtonIcon text={t('home.month.navigate')} icon={ArrowRightIcon} />
    </a>
  </div>
</section>
